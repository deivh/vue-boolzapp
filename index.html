<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- VueJS -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <title>Vue TodoList</title>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/script.js" charset="utf-8"></script>
    <title>Document</title>
</head>
<body> 
    <div id="app" class="container">
        <div class="box">
            <div class="contactsList">
                <div class="profile">
                    <div class="myProfile">
                        <img src="img/profile.jfif" alt="immagine profilo">
                        <div class="icons"> 
                            <i class="fas fa-circle-notch"></i>
                            <i class="fas fa-comment-alt"></i>
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    
                    </div>
                    <div class="alerts">
                        <i class="fas fa-bell-slash"></i>
                        <div>
                            <h2> Ricevi le notifiche dei nuovi messaggi</h2>
                            <h3>Disattiva le notifiche</h3>
                        </div>
                    </div>
                    <div class="search">
                        <label for="search">
                            <i class="fas fa-search"></i>
                        </label>
                        <input type="text" v-model="contactName" name="search" placeholder="Cerca un contatto qui"></input>
                    </div>
                </div>
                <div class="contacts">
                    <ul>
                        <li v-for="(name, index) in contacts" 
                        @click="loadMsgClick(index)" 
                        class="contact"
                        :class="index == activeIndex ? 'active' : ''">
                            <div v-if="contactName != '' && contactName !== name.name[0]" class="hiddenChat">
                                <img :src="name.avatar" alt="profilepic">
                                <span>{{ name.name }}</span>
                            </div>
                            <div v-else>
                                <img :src="name.avatar" alt="profilepic">
                                <span>{{ name.name }}</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="activeChat">
                <div class="messageBoxFull">
                    <div class="messageBox">
                        <div class="header-right-logo">
                            <img :src="contacts[activeIndex].avatar">
                            <h3>{{ contacts[activeIndex].name }}</h3>
                        </div>
                        <ul>
                            <li>
                                <div v-for="msg in contacts[activeIndex].messages" 
                                :key="msg.text" >
                                    <p v-if="msg.status=='sent'" class="sent">{{ msg.text }}</p>
                                    <p v-else class="received">{{ msg.text }} </p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="sendMsg">
                        <button>
                            <i class="far fa-smile-beam"></i>
                        </button>
                        <button>
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <input type="text" placeholder="scrivi qui un messaggio" v-model="newMsg.text" @keyup.enter="addNewMsg" >
                        <button class="send"> 
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
                <div class="noActiveChat hidden">
                    <img src="img/logo.png" alt="whatsapp promo">
                    <h2>Mantieni il telefono connesso</h2>
                    <p>BoolzApp si collega al tuo telefono per sincronizzare i messaggi. Per Ridurre l'utilizzo dei dati, collega il telefono al Wi-Fi</p>
                    <hr>
                    <p>WhatsApp Ã¨ disponibile per Windows. <span class="highlighted">Scaricala qui.</span></p>
                </div>
    
            </div>
        </div>
        
    </div>
    
</body>
</html>